var camera,camera2,moveController,canvas=document.getElementById("renderCanvas");!function(A,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NoSleep=e():A.NoSleep=e()}("undefined"!=typeof self?self:this,function(){return function(A){function e(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return A[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t={};return e.m=A,e.c=t,e.d=function(A,t,i){e.o(A,t)||Object.defineProperty(A,t,{configurable:!1,enumerable:!0,get:i})},e.n=function(A){var t=A&&A.__esModule?function(){return A.default}:function(){return A};return e.d(t,"a",t),t},e.o=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},e.p="",e(e.s=0)}([function(A,e,t){"use strict";var i=function(){function A(A,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(A,i.key,i)}}return function(e,t,i){return t&&A(e.prototype,t),i&&A(e,i),e}}(),o=t(1),n=o.webm,a=o.mp4,l="undefined"!=typeof navigator&&10>parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))&&!window.MSStream,r=function(){function A(){var e=this;(function A(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,A),l?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("muted",""),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",n),this._addSourceToVideo(this.noSleepVideo,"mp4",a),this.noSleepVideo.addEventListener("loadedmetadata",function(){e.noSleepVideo.duration<=1?e.noSleepVideo.setAttribute("loop",""):e.noSleepVideo.addEventListener("timeupdate",function(){e.noSleepVideo.currentTime>.5&&(e.noSleepVideo.currentTime=Math.random())})}))}return i(A,[{key:"_addSourceToVideo",value:function(A,e,t){var i=document.createElement("source");i.src=t,i.type="video/"+e,A.appendChild(i)}},{key:"enable",value:function(){l?(this.disable(),console.warn("\n        NoSleep enabled for older iOS devices. This can interrupt\n        active or long-running network requests from completing successfully.\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\n      "),this.noSleepTimer=window.setInterval(function(){document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){l?this.noSleepTimer&&(console.warn("\n          NoSleep now disabled for older iOS devices.\n        "),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),A}();A.exports=r},function(A,e,t){"use strict";A.exports={webm:"data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",mp4:"data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQAD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"}}])});var isPC=!1,isMobile=!1;/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))?isMobile=!0:isPC=!0;var startRenderLoop=function(A,e){A.runRenderLoop(function(){sceneToRender&&sceneToRender.activeCamera&&sceneToRender.render()})},engine=null,scene=null,sceneToRender=null,createDefaultEngine=function(){return new BABYLON.Engine(canvas,!0,{preserveDrawingBuffer:!0,stencil:!0,disableWebGL2Support:!1})},run=!1,back=!1,left=!1,right=!1,timer=0,createScene=async function(){var A=new BABYLON.Scene(engine);let e={},t=new BABYLON.ArcRotateCamera("camera",BABYLON.Tools.ToRadians(0),BABYLON.Tools.ToRadians(70),.5,new BABYLON.Vector3(0,.1,0),A);t.minZ=.01,t.upperRadiusLimit=200,t.lowerRadiusLimit=45,t.upperBetaLimit=1.25,t.lowerBetaLimit=0,t.attachControl(canvas,!0),isMobile?((camera2=new BABYLON.FreeCamera("DeviceCamera",new BABYLON.Vector3(60,8,.1),A)).setTarget(new BABYLON.Vector3(-2.5,8,0)),camera2.inertia*=.95,camera2.ellipsoid=new BABYLON.Vector3(1,4,1),camera2.speed=2,camera2.detachControl(canvas,!0),camera2.invertRotation=!1):((camera2=new BABYLON.UniversalCamera("UniversalCamera",new BABYLON.Vector3(60,8,.1),A)).setTarget(new BABYLON.Vector3(-2.5,8,0)),camera2.attachControl(canvas,!0),camera2.inertia*=.95,camera2.ellipsoid=new BABYLON.Vector3(1,4,1),camera2.speed=2,camera2.invertRotation=!1,camera2.detachControl(canvas),camera2.touchAngularSensibility=5e4,camera2.keysUp=[87],camera2.keysDown=[83],camera2.keysLeft=[65],camera2.keysRight=[68]);var i=function(){isPC&&(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||document.msPointerLockElement?(camera2.attachControl(canvas),p=!0,this.active=!0):(camera2.detachControl(canvas),p=!1))};document.addEventListener("pointerlockchange",i,!1),document.addEventListener("mspointerlockchange",i,!1),document.addEventListener("mozpointerlockchange",i,!1),document.addEventListener("webkitpointerlockchange",i,!1),A.fogMode=BABYLON.Scene.FOGMODE_EXP,A.fogColor=new BABYLON.Color3(.9,.9,.85),A.fogDensity=.005,A.fogEnabled=!1,e.lighting=BABYLON.CubeTexture.CreateFromPrefilteredData("https://patrickryanms.github.io/BabylonJStextures/Demos/sodaBottle/assets/env/hamburg_hbf.env",A),e.lighting.name="hamburg_hbf",e.lighting.environmentIntensity=0,e.lighting.gammaSpace=!1,e.lighting.rotationY=BABYLON.Tools.ToRadians(0),A.environmentTexture=e.lighting,e.skybox=BABYLON.MeshBuilder.CreateSphere("Dome",{slice:1,diameter:1024},A),e.skyboxMaterial=new BABYLON.PBRMaterial("skyBox",A),e.skyboxMaterial.backFaceCulling=!1,e.skyboxMaterial.reflectionTexture=new BABYLON.CubeTexture("https://patrickryanms.github.io/BabylonJStextures/Demos/sodaBottle/assets/skybox/hamburg",A),e.skyboxMaterial.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE,e.skyboxMaterial.diffuseColor=new BABYLON.Color3(0,0,0),e.skyboxMaterial.specularColor=new BABYLON.Color3(0,0,0),e.skyboxMaterial.microSurface=.35,e.skybox.material=e.skyboxMaterial;var o=new BABYLON.DirectionalLight("dir01",new BABYLON.Vector3(-1,-1,1),A);o.position=new BABYLON.Vector3(20,30,-20),o.intensity=3;var n=new BABYLON.ShadowGenerator(512,o);n.useBlurExponentialShadowMap=!0,n.enableSoftTransparentShadow=!0,n.transparencyShadow=!0,n.darkness=.01;var a=BABYLON.MeshBuilder.CreateGround("myGround",{width:200,height:200,subdivisions:8},A);a.position=new BABYLON.Vector3(0,0,0),a.visibility=!1;var l=new BABYLON.StandardMaterial("mat1",A);l.diffuseColor=new BABYLON.Color3(1,1,0),l.emissiveColor=new BABYLON.Color3(1,1,0);var r=BABYLON.MeshBuilder.CreateBox("Box1",{height:1,width:.75,depth:.1});r.position=new BABYLON.Vector3(0,5,0),r.rotation.x=-Math.PI/8,r.visibility=!1,r.material=l;var s=new BABYLON.StandardMaterial("mat2",A);s.diffuseColor=new BABYLON.Color3(1,0,0),s.emissiveColor=new BABYLON.Color3(1,0,0);var c=BABYLON.MeshBuilder.CreateBox("Box2",{height:1,width:.75,depth:.1});c.position=new BABYLON.Vector3(53,15,-46),c.rotation.x=-Math.PI/8,c.visibility=!1,c.material=s;var d=new BABYLON.StandardMaterial("mat3",A);d.diffuseColor=new BABYLON.Color3(1,.65,0),d.emissiveColor=new BABYLON.Color3(1,.65,0);var h=BABYLON.MeshBuilder.CreateBox("Box3",{height:1,width:.75,depth:.1});h.position=new BABYLON.Vector3(-34,9,56),h.rotation.x=-Math.PI/8,h.visibility=!1,h.material=d;var m=BABYLON.MeshBuilder.CreatePlane("myGround",{width:180,height:20},A);m.position=new BABYLON.Vector3(-66,0,0),m.rotation.z=Math.PI,m.rotation.y=-Math.PI/2,m.visibility=!0,m.visibility=0;var $=BABYLON.MeshBuilder.CreatePlane("myGround",{width:180,height:20},A);$.position=new BABYLON.Vector3(66,0,0),$.rotation.z=Math.PI,$.rotation.y=Math.PI/2,$.visibility=!0,$.visibility=0,camera2.onCollide=function(A){"Box1"===A.name&&(b.text="Page 1 acquired",B.isVisible=!0,G.isVisible=!0,N.isVisible=!1,_.isVisible=!1,k.isVisible=!1,L.isVisible=!1,S.isVisible=!1,c.visibility=!0,v.image.source="images/Page1.png",A.dispose(),setTimeout(function(){u.text="",b.text=""},3e3)),"Box2"===A.name&&(b.text="Page 2 acquired",G.isVisible=!1,_.isVisible=!1,N.isVisible=!1,L.isVisible=!1,S.isVisible=!1,B.isVisible=!0,k.isVisible=!0,h.visibility=!0,E.image.source="images/Page2.png",A.dispose(),setTimeout(function(){u.text="",b.text=""},3e3)),"Box3"===A.name&&(b.text="Page 3 acquired",G.isVisible=!1,_.isVisible=!1,k.isVisible=!1,L.isVisible=!1,S.isVisible=!1,B.isVisible=!0,N.isVisible=!0,T.image.source="images/Page3.png",A.dispose(),setTimeout(function(){u.text="",b.text=""},3e3),setTimeout(function(){M.play()},8e3))};var g=0;let p=!1;A.onPointerDown=function(e){if(B.isVisible&&(B.isVisible=!1,_.isVisible=!1,q&&setTimeout(function(){j=!0},80),0==g&&(Q.play(),g+=1),K?(B.isVisible=!0,N.isVisible=!1,V.isVisible=!0,K=!1):V.isVisible=!1),A.activeCamera==camera2&&(isPC&&document.pointerLockElement!==canvas&&(canvas.requestPointerLock=canvas.requestPointerLock||canvas.msRequestPointerLock||canvas.mozRequestPointerLock||canvas.webkitRequestPointerLock||!1,canvas.requestPointerLock&&canvas.requestPointerLock()),0==e.button&&A.activeCamera==camera2)){let t=camera2.getForwardRay();t.length=25;let i=A.pickWithRay(t).pickedMesh;null!=i&&("Box1"==i.name&&(i.dispose(),b.text="Page 1 acquired",B.isVisible=!0,G.isVisible=!0,N.isVisible=!1,_.isVisible=!1,k.isVisible=!1,L.isVisible=!1,S.isVisible=!1,c.visibility=!0,v.image.source="images/Page1.png",setTimeout(function(){u.text="",b.text=""},3e3)),"Box2"==i.name&&null!=i&&(i.dispose(),b.text="Page 2 acquired",G.isVisible=!1,_.isVisible=!1,N.isVisible=!1,L.isVisible=!1,S.isVisible=!1,B.isVisible=!0,k.isVisible=!0,h.visibility=!0,E.image.source="images/Page2.png",setTimeout(function(){u.text="",b.text=""},3e3)),"Box3"==i.name&&null!=i&&(i.dispose(),b.text="Page 3 acquired",G.isVisible=!1,_.isVisible=!1,k.isVisible=!1,L.isVisible=!1,S.isVisible=!1,B.isVisible=!0,N.isVisible=!0,T.image.source="images/Page3.png",K=!0,setTimeout(function(){u.text="",b.text=""},3e3),setTimeout(function(){M.play()},8e3)))}};let[u,b,w]=createUI();if(BABYLON.SceneLoader.ShowLoadingScreen=!1,BABYLON.SceneLoader.OnPluginActivatedObservable.addOnce(function(e){e.onCompleteObservable.add(function(){b.text="Loading Complete";for(var e=0;e<A.meshes.length;e++)(A.meshes[e].name.includes("Plane")||"Cylinder.002"==A.meshes[e].name||"Circle"==A.meshes[e].name)&&(A.meshes[e].receiveShadows=!0,A.meshes[e].material.environmentIntensity=.25),A.meshes[e].name.includes("Cube")&&(n.addShadowCaster(A.meshes[e]),A.meshes[e].checkCollisions=!0,A.meshes[e].material.environmentIntensity=.25);setTimeout(function(){u.text="",b.text="Light and Shadows Updated"},2e3),setTimeout(function(){u.text="",b.text="",z.isVisible=!0,isMobile&&(W.isVisible=!0),r.visibility=!0},4e3)})}),BABYLON.SceneLoader.AppendAsync("https://dl.dropbox.com/s/wn9dmi5d1v3p5iu/Park.glb?dl=0","Park.glb",A,function(A){if(A.lengthComputable)b.text="Loading, please wait..."+(100*A.loaded/A.total).toFixed()+"%";else{var e=A.loaded/1048576;b.text="Loading, please wait..."+Math.floor(100*e)/100+" MB already loaded."}}),A.gravity=new BABYLON.Vector3(0,-.9,0),A.collisionsEnabled=!0,isMobile){camera2.applyGravity=!0,camera2._needMoveForGravity=!0,camera2.checkCollisions=!0;var f=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI"),y=BABYLON.GUI.Button.CreateImageOnlyButton("but3","");y.width="180px",y.height="180px",y.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,y.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,y.top="-150px",y.cornerRadius=5,y.image.source="images/footprints.svg",y.thickness=0,y.background="rgba(1, 1, 1, 0.05)",y.thickness=0,y.alpha=.75,y.onPointerDownObservable.add(function(){run=!0}),y.onPointerUpObservable.add(function(){run=!1}),y.isVisible=!1,f.addControl(y)}else camera2.applyGravity=!0,camera2._needMoveForGravity=!0,camera2.checkCollisions=!0;a.checkCollisions=!0,r.checkCollisions=!0,c.checkCollisions=!0,h.checkCollisions=!0;var f=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI"),I=BABYLON.Mesh.CreatePlane("targetViewVR"),C=new BABYLON.GUI.Ellipse;C.width="20px",C.height="20px",C.color="white",C.thickness=3,f.addControl(C),I.isPickable=!1,C.isVisible=!1;var x=new BABYLON.GUI.Rectangle("invent");x.background="gray",x.width="50%",x.height="27%",isMobile&&(x.height="10%"),x.alpha=.85,x.isVisible=!1,f.addControl(x);var v=BABYLON.GUI.Button.CreateImageOnlyButton("Page1","");v.width="33%",v.height="100%",v.background="white",v.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,v.onPointerDownObservable.add(function(){""!=v.image.source&&(j=!1,B.isVisible=!B.isVisible,G.isVisible=!0,N.isVisible=!1,k.isVisible=!1,L.isVisible=!1,S.isVisible=!1)}),x.addControl(v);var E=BABYLON.GUI.Button.CreateImageOnlyButton("Page2","");E.width="33%",E.height="100%",E.background="white",E.onPointerDownObservable.add(function(){""!=E.image.source&&(j=!1,B.isVisible=!B.isVisible,k.isVisible=!0,G.isVisible=!1,N.isVisible=!1,L.isVisible=!1,S.isVisible=!1)}),E.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,x.addControl(E);var T=BABYLON.GUI.Button.CreateImageOnlyButton("Page3","");T.width="33%",T.height="100%",T.background="white",T.onPointerDownObservable.add(function(){""!=T.image.source&&(j=!1,B.isVisible=!B.isVisible,N.isVisible=!0,G.isVisible=!1,k.isVisible=!1,L.isVisible=!1,S.isVisible=!1)}),T.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,x.addControl(T);var B=new BABYLON.GUI.Rectangle("rect");B.background="gray",B.width="55%",B.height="75%",B.alpha=.85,f.addControl(B);var _=new MixedTextBlock;_.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,_.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,_.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,_.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,_.multiTextArgs=[{text:"\n In Arc Rotate Mode:",fillStyle:"white",font:"bold 32px Helvetica"},{text:"\n \n Have a look at the park in Arc Rotate Mode",fillStyle:"white",font:"bold 22px Helvetica"},{text:`
 
 In Walking Mode:`,fillStyle:"white",font:"bold 35px Helvetica"},{text:"\n \n Desktop Mode: Use WASD for WALK \n Mobile Mode: Press the Walk Button \n \n  Use Shift to SPRINT \n Walk over or left click to collect the Pages",fillStyle:"white",font:"bold 22px Helvetica"},{text:"\n \n Press I Key to open Inventory or Click the Inventory Button",fillStyle:"white",font:"bold 22px Helvetica"},{text:"\n \n When you collect the single pages they are added into your Inventory \n Each page reveals a part of an story that occurred in this park \n Collect all pieces and reveal the story",fillStyle:"white",font:"bold 25px Helvetica"},{text:"\n \n There is Audio playing. It can be turned of in options. \n Wear headphones for the best immersive experience",fillStyle:"yellow",font:"bold 22px Helvetica"},{text:"\n \n This story is complete AI generated with some promts and inspiration from me",fillStyle:"yellow",font:"bold 28px Helvetica"},],_.text="hi",_.isVisible=!0,B.addControl(_);var G=new MixedTextBlock;G.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,G.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,G.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,G.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,G.multiTextArgs=[{text:"\n Mysterious case of Timmy Parker",fillStyle:"white",font:"bold 35px Helvetica"},{text:"\n \n Part 1 of 3",fillStyle:"white",font:"bold 30px Helvetica"},{text:"\n \n \n It was a hot summer day in the small town of Millfield when eight-year-old Timmy Parker went missing in the park. His parents, Mary and John, had taken him and his younger sister, Sara, to the park for a picnic at the pavilion, and they had all been enjoying the day together.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n Timmy was an active and adventurous boy, always eager to explore and try new things. He loved spending time in the park, playing sports, riding his bike, and practicing his skateboarding skills.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n On this particular day, Timmy was particularly excited to go to the skate park and show off his new tricks. He had been practicing hard and was eager to impress his sister and their friend, Emily, who had also joined them at the park.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n Timmy was last seen playing at the skate park with Sara and Emily, where he had been practicing his skateboarding skills. His parents noticed he was missing when they went to pack up their picnic basket and Timmy was nowhere to be found.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n Panicked, Mary and John searched the park for Timmy, but he was nowhere to be found. They called the police, who quickly arrived on the scene and began a search for the missing boy.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n As the hours passed, the search for Timmy intensified. The police scoured the park and interviewed witnesses, but no one had seen Timmy since he was at the skate park.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n \n ...",fillStyle:"white",font:"bold 18px Helvetica"}],G.text="hi",G.isVisible=!1,B.addControl(G);var k=new MixedTextBlock;k.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,k.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,k.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,k.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,k.multiTextArgs=[{text:"\n Mysterious case of Timmy Parker",fillStyle:"white",font:"bold 35px Helvetica"},{text:"\n \n Part 2 of 3",fillStyle:"white",font:"bold 30px Helvetica"},{text:"\n \n The search for Timmy continued into the night and the entire community joined in, determined to find the missing boy. Just when all hope seemed lost, Timmy was found the next morning, lying lifeless in the small lake near the park.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n The police were baffled by Timmy's death, as there were no signs of foul play or injury. They conducted a thorough investigation, but were unable to find any leads or suspects. The case remained a mystery and the community was left to mourn the loss of the young boy.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n As the weeks passed, Sara began to have vivid nightmares about the day Timmy went missing. She claimed that the three of them had been playing together at the skate park, but that Emily had suddenly pushed Timmy into the lake and he had drowned.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n Sara's parents were skeptical of her story, as they had never seen or met Emily before. Sara had always talked about her as her imaginary friend, and Mary and John had just assumed she was a figment of Sara's imagination.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n However, Sara insisted that Emily was real and that she had always been there for them at the park. She claimed that Emily was the one who had taught Timmy how to skateboard and that they had always played together at the skate park.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n The police were intrigued by Sara's story and decided to investigate further. They searched for any information about Emily and her family, but they were unable to find any records or evidence of her existence. It was as if she had simply vanished into thin air.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n ...",fillStyle:"white",font:"bold 18px Helvetica"}],k.text="hi",k.isVisible=!1,B.addControl(k);var N=new MixedTextBlock;N.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,N.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,N.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,N.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,N.multiTextArgs=[{text:"\n Mysterious case of Timmy Parker",fillStyle:"white",font:"bold 35px Helvetica"},{text:"\n \n Part 3 of 3",fillStyle:"white",font:"bold 30px Helvetica"},{text:"\n \n Sara's parents were at a loss as to what to do. They were worried about Sara's well-being and decided to bring her to a therapist for help.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n During her sessions with the therapist, Sara revealed that Emily was not a real person. She was a ghost that only Sara could see and communicate with. Sara claimed that Emily had been her imaginary friend since she was a child, and that she had always been there for her.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n The therapist listened to Sara's story with an open mind, and eventually came to the conclusion that Emily was a manifestation of Sara's subconscious mind. She believed that Sara was projecting her feelings of guilt and grief onto the ghostly figure of Emily.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n Sara's parents were shocked by this revelation, but they were relieved to finally have an explanation for Sara's behavior. With the help of the therapist, they were able to work through their grief and help Sara come to terms with Timmy's death.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n As for Emily, she was never seen or heard from again. The mysterious ghostly figure remained a mystery, but Sara was able to find peace and move on from the tragedy that had befallen her and her family. The police closed the case, unable to solve the mystery of Timmy's death. But for Sara and her family, the memory of Emily and the tragedy at the park would always linger in their minds.",fillStyle:"white",font:"bold 20px Helvetica"},{text:"\n \n However, even as the years passed, there were still some strange occurrences in the park that seemed to be linked to Emily. Some people claimed to hear the sound of a little girl playing at night, even though there was no one there. Others reported seeing a ghostly figure resembling a young girl in the park, although no one was able to confirm these sightings.",fillStyle:"white",font:"bold 20px Helvetica"},],N.text="hi",N.isVisible=!1,B.addControl(N);var L=new MixedTextBlock;L.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,L.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,L.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,L.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,L.multiTextArgs=[{text:"\n Options",fillStyle:"white",font:"bold 35px Helvetica"},{text:"\n \n This is a small interactive story",fillStyle:"white",font:"bold 30px Helvetica"},{text:"\n \n We collect pages of an old chase to find out what happend in this park.",fillStyle:"white",font:"bold 24px Helvetica"},{text:"\n Collect all pages and unveil the mystery that took place here",fillStyle:"white",font:"bold 24px Helvetica"},{text:"\n \n Desktop Mode: \n - Use WASD for WALK \n - Use Shift to SPRINT \n - Walk over or left click to collect the Pages",fillStyle:"white",font:"bold 22px Helvetica"},{text:"\n - Press I Key to open Inventory \n \n Mobile Mode: \n - Press the Walk Button  \n - Click the Inventory Button to open Inventory",fillStyle:"white",font:"bold 22px Helvetica"}],L.text="hi",L.isVisible=!1,B.addControl(L);var V=new MixedTextBlock;V.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,V.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,V.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,V.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,V.multiTextArgs=[{text:"\n Thank you for playing",fillStyle:"white",font:"bold 35px Helvetica"},{text:"\n \n the 'Game' is over, we hope you liked the story",fillStyle:"white",font:"bold 30px Helvetica"},{text:"\n \n This was just a short concept work. Created to test and entertain.",fillStyle:"white",font:"bold 25px Helvetica"},{text:"\n \n You can still walk around and have a look at all assets at the park \n and reread the story inside your inventory.",fillStyle:"white",font:"bold 25px Helvetica"},{text:"\n \n \n We hope to see you at our next project. \n \n Greetings \n \n Player Eleven Studios",fillStyle:"white",font:"bold 18px Helvetica"}],V.text="hi",V.isVisible=!1,B.addControl(V);let Q=new BABYLON.Sound("Music","/audio/ambient.mp3",A,null,{loop:!0,volume:.25}),M=new BABYLON.Sound("girl","audio/girlgiggle.mp3",A,null,{loop:!1,volume:.25});var S=new BABYLON.GUI.Rectangle("recet");S.color="blue",S.width="300px",S.height="300px",S.thickness=0,S.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,S.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,S.top=450,isMobile&&(S.top=550),S.left=0,S.isVisible=!1,B.addControl(S);let H=new BABYLON.GUI.Checkbox("music");H.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,H.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,isMobile?(H.heightInPixels=35,H.widthInPixels=35,H.top=85,H.left=30):(H.heightInPixels=20,H.widthInPixels=20,H.top=90,H.left=50),H.isChecked=!0,H.color="#FFFFFF",H.onIsCheckedChangedObservable.add(function(A){Q.isPlaying?Q.pause():Q.play()}),S.addControl(H);let R=new BABYLON.GUI.Checkbox("glow");R.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,R.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,isMobile?(R.heightInPixels=35,R.widthInPixels=35,R.top=45,R.left=30):(R.heightInPixels=20,R.widthInPixels=20,R.top=50,R.left=50),R.isChecked=!0,R.color="#FFFFFF",R.onIsCheckedChangedObservable.add(function(A){AA.isEnabled=A}),S.addControl(R);let P=new BABYLON.GUI.Checkbox("fog");P.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,P.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,isMobile?(P.heightInPixels=35,P.widthInPixels=35,P.top=5,P.left=30):(P.heightInPixels=20,P.widthInPixels=20,P.top=10,P.left=50),P.isChecked=!0,P.color="#FFFFFF",P.onIsCheckedChangedObservable.add(function(e){A.fogEnabled=e}),S.addControl(P);let O=new BABYLON.GUI.TextBlock("tb1","Music ON/OFF");O.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,O.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,O.top=90,O.left=86,O.fontSize=25,O.color="white",O.fontStyle="bold",O.fontFamily="Helvetica",S.addControl(O);let U=new BABYLON.GUI.TextBlock("tb6","Glow ON/OFF");U.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,U.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,U.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,U.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,U.top=50,U.left=86,U.fontSize=25,U.color="white",U.fontStyle="bold",U.fontFamily="Helvetica",S.addControl(U);let D=new BABYLON.GUI.TextBlock("tb7","Fog On/OFF");D.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,D.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,D.top=10,D.left=86,D.fontSize=25,D.color="white",D.fontStyle="bold",D.fontFamily="Helvetica",S.addControl(D);var F=new BABYLON.GUI.TextBlock;F.text="Volume",F.height="30px",F.color="white",F.fontSize=25,F.color="white",F.fontStyle="bold",F.fontFamily="Helvetica",F.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,F.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,F.top=130,F.left=-15,S.addControl(F);var Z=new BABYLON.GUI.Slider;Z.minimum=0,Z.maximum=1,Z.value=.25,Z.height="20px",Z.width="200px",Z.color="white",Z.background="#A9A9A9",Z.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,Z.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,Z.top=180,Z.left=43,Z.onValueChangedObservable.add(function(A){Q.isPlaying&&Q.setVolume(A)}),S.addControl(Z);var z=BABYLON.GUI.Button.CreateSimpleButton("but2","Story Mode");if(z.width="150px",z.height="40px",z.color="Black",z.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,z.left="-50px",z.cornerRadius=5,z.background="white",z.thickness=0,z.onPointerUpObservable.add(function(){A.activeCamera==camera2?(camera2.detachControl(canvas),A.activeCamera=t,t.attachControl(canvas,!0),z.textBlock.text="Story Mode",A.fogEnabled=!1,AA.isEnabled=!1,Y.isVisible=!1,w.isVisible=!1,C.isVisible=!1,isMobile&&(y.isVisible=!1)):(t.detachControl(canvas),A.activeCamera=camera2,camera2.attachControl(canvas,!0),z.textBlock.text="View Mode",Y.isVisible=!0,A.fogEnabled=!0,AA.isEnabled=!0,isPC&&(w.isVisible=!0),C.isVisible=!0,isMobile&&(y.isVisible=!0))}),z.isVisible=!1,f.addControl(z),isMobile){var W=BABYLON.GUI.Button.CreateImageOnlyButton("butt","");W.width="60px",W.height="60px",W.color="Black",W.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,W.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,W.left="-50px",W.top="-50px",W.cornerRadius=5,W.image.source="images/inventory.svg",W.thickness=0,W.background="rgba(1, 1, 1, 0.1)",W.onPointerUpObservable.add(function(){j=!j,q=!q}),W.isVisible=!0,f.addControl(W)}var Y=BABYLON.GUI.Button.CreateImageOnlyButton("buttt","");Y.width="60px",Y.height="60px",Y.color="Black",Y.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,Y.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,Y.left="-50px",Y.top="50px",Y.cornerRadius=5,Y.image.source="images/settings.svg",Y.thickness=0,Y.background="rgba(1, 1, 1, 0.05)",Y.onPointerUpObservable.add(function(){B.isVisible=!B.isVisible,L.isVisible=!0,S.isVisible=!0,x.isVisible=!1,_.isVisible=!1,G.isVisible=!1,k.isVisible=!1,N.isVisible=!1}),Y.isVisible=!1,f.addControl(Y),A.onBeforeRenderObservable.add(function(){if(isMobile&&y.isVisible){let e=camera2.getForwardRay();e.length=25;let t=A.pickWithRay(e);if(!0==run&&t.distance<=0||!0==run&&t.distance>=10){var i=BABYLON.Vector3.TransformCoordinates(new BABYLON.Vector3(0,0,2),BABYLON.Matrix.RotationY(camera2.rotation.y));camera2.position.addInPlace(i)}}else{if(!0==run){var i=BABYLON.Vector3.TransformCoordinates(new BABYLON.Vector3(0,0,.1),BABYLON.Matrix.RotationY(camera2.rotation.y));camera2.position.addInPlace(i)}if(!0==back){var i=BABYLON.Vector3.TransformCoordinates(new BABYLON.Vector3(0,0,-.1),BABYLON.Matrix.RotationY(camera2.rotation.y));camera2.position.addInPlace(i)}if(!0==left){var i=BABYLON.Vector3.TransformCoordinates(new BABYLON.Vector3(-.1,0,0),BABYLON.Matrix.RotationY(camera2.rotation.y));camera2.position.addInPlace(i)}if(!0==right){var i=BABYLON.Vector3.TransformCoordinates(new BABYLON.Vector3(.1,0,0),BABYLON.Matrix.RotationY(camera2.rotation.y));camera2.position.addInPlace(i)}}r.rotation.y+=.05,c.rotation.y+=.05,h.rotation.y+=.05});var X=50,J=!1,j=!1,q=!1,K=!1;A.onBeforeRenderObservable.add(function(){J&&A.activeCamera==camera2?X>0?(camera2.speed=1.5,X--,w.width=X/1/100):(camera2.speed=.5,X<50&&!J&&(X+=.5,w.width=X/1/100)):(camera2.speed=.5,X<50&&(X+=.5,w.width=X/1/100)),j?(x.isVisible=!0,isPC&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())):x.isVisible=!1}),A.onKeyboardObservable.add(A=>{switch(A.type){case BABYLON.KeyboardEventTypes.KEYDOWN:switch(A.event.key){case"Shift":J=!0;break;case"i":j=!j,q=!q}break;case BABYLON.KeyboardEventTypes.KEYUP:"Shift"===A.event.key&&(J=!1)}});var AA=new BABYLON.GlowLayer("glow",A,{mainTextureFixedSize:256,blurKernelSize:32});return AA.intensity=.45,AA.isEnabled=!1,A};function createUI(){let A=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI"),e=new BABYLON.GUI.TextBlock;e.color="lightgray",e.fontSize=12,e.top="-45%",e.text=" Asset created by player11en \n \n Music by Guilherme Bernardes William",A.addControl(e);let t=new BABYLON.GUI.TextBlock;t.color="white",t.fontSize=24,t.top="-38%",A.addControl(t);let i=new BABYLON.GUI.TextBlock;i.color="white",i.fontSize=24,i.top="45%",A.addControl(i);let o=new BABYLON.GUI.Rectangle;return o.width=.5,o.height="15px",o.outlineWidth="2px",o.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,o.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,o.top="10px",o.left="5px",o.isVisible=!1,o.background=BABYLON.Color3.FromHexString("#99EE99").toHexString(),A.addControl(o),[t,i,o]}window.initFunction=async function(){var A=async function(){try{return createDefaultEngine()}catch(A){return console.log("the available createEngine function failed. Creating the default engine instead"),createDefaultEngine()}};if(window.engine=await A(),!engine)throw"engine should not be null.";startRenderLoop(engine,canvas),window.scene=createScene()},initFunction().then(()=>{scene.then(A=>{sceneToRender=A})}),window.addEventListener("resize",function(){engine.resize()});var __extends=this&&this.__extends||function(){var A=function(e,t){return(A=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),MixedTextBlock=function(A){function e(){return null!==A&&A.apply(this,arguments)||this}return __extends(e,A),Object.defineProperty(e.prototype,"multiTextArgs",{set:function(A){this._multiTextArgs=A},enumerable:!1,configurable:!0}),e.prototype._drawText=function(A,e,t,i){var o=this._currentMeasure.width,n=0;switch(this._textHorizontalAlignment){case BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT:n=10;break;case BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT:n=o-e;break;case BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER:n=(o-e)/2}(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(i.shadowColor=this.shadowColor,i.shadowBlur=this.shadowBlur,i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY),this.outlineWidth&&i.strokeText(A,this._currentMeasure.left+n,t);var a=t-this._fontOffset.height;try{a+=parseInt(this._multiTextArgs[0].font.split(" ")[1].replace("px",""))}catch(l){a=this._fontOffset.height}this._fillMixedText(i,this._multiTextArgs,this._currentMeasure.left+n,a)},e.prototype._fillMixedText=function(A,e,t,i){var o=A.fillStyle,n=A.font,a=this._fontOffset.height,l=t;this._currentMeasure.top;var r=this._currentMeasure.width-30;A.save(),e.forEach(function(e){var s=e.text,c=e.fillStyle,d=e.font,h=s.split(" "),m=0;try{m=parseInt(e.font.split(" ")[1].replace("px",""))}catch($){m=a}A.fillStyle=c||o,A.font=d||n,h.forEach(function(e){var o=e.split("\n");if(o.length>1)for(var n=0;n<o.length;n++)o[n]=" "+o[n],t-l+A.measureText(o[n]).width>r&&(t=l,i+=m,o[n]=o[n].replace(" ","")),t==l&&(o[n]=o[n].replace(" ","")),A.fillText(o[n],t,i),t+=A.measureText(o[n]).width,n!=o.length-1&&(i+=m,t=l);else e=" "+e,t-l+A.measureText(e).width>r&&(t=l,i+=m,e=e.replace(" ","")),t==l&&(e=e.replace(" ","")),A.fillText(e,t,i),t+=A.measureText(e).width})}),A.restore()},e}(BABYLON.GUI.TextBlock);